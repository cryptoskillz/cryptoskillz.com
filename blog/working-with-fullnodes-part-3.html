<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Working with Fullnodes part 3 - cryptoskillz</title><meta name="description" content="ECS (e-commerce software) is an open source Bitcoin e-commerce server. It comes with a Javascript e-commerce injector a REST server and an admin control panel. "><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://cryptoskillz.com/blog/working-with-fullnodes-part-3.html"><link rel="amphtml" href="https://cryptoskillz.com/blog/amp/working-with-fullnodes-part-3.html"><link rel="alternate" type="application/atom+xml" href="https://cryptoskillz.com/blog/feed.xml"><link rel="alternate" type="application/json" href="https://cryptoskillz.com/blog/feed.json"><meta property="og:title" content="Working with Fullnodes part 3"><meta property="og:image" content="https://cryptoskillz.com/blog/media/website/logo.png"><meta property="og:site_name" content="cryptoskillz"><meta property="og:description" content="ECS (e-commerce software) is an open source Bitcoin e-commerce server. It comes with a Javascript e-commerce injector a REST server and an admin control panel. "><meta property="og:url" content="https://cryptoskillz.com/blog/working-with-fullnodes-part-3.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,h1,.h1,blockquote,.search__input,.author__name,.author__info>p,.feed__item h2,.post__nav-link{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://cryptoskillz.com/blog/assets/css/style.css?v=58acac63961d23abccded091eaca6989"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cryptoskillz.com/blog/working-with-fullnodes-part-3.html"},"headline":"Working with Fullnodes part 3","datePublished":"2018-11-30T12:24","dateModified":"2019-09-20T12:25","image":{"@type":"ImageObject","url":"https://cryptoskillz.com/blog/media/website/logo.png","height":178,"width":685},"description":"<figure class=\"post__image post__image\" ><img src=\"https://cryptoskillz.com/blog/media/posts/15/1_nY1L26Pnm4pyiBRaVkcy3A.jpeg\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-xs.jpeg 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-sm.jpeg 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-md.jpeg 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-lg.jpeg 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-xl.jpeg 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-2xl.jpeg 1600w\"  alt=\"\" width=\"4000\" height=\"2494\">\n<figcaption >\n<figure class=\"ke kf kg kh ki fr x y paragraph-image\">\n<figcaption class=\"az dz kx ky hh dn x y kz la au dx\" data-selectable-paragraph=\"\">Photo by <a href=\"https://unsplash.com/photos/FKZwWLWgGyM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\" class=\"cb bx lb lc ld le\" target=\"_blank\" rel=\"noopener noreferrer\">Esther Jiao</a> on <a href=\"https://unsplash.com/search/photos/block?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\" class=\"cb bx lb lc ld le\" target=\"_blank\" rel=\"noopener noreferrer\">Unsplash</a></figcaption>\n</figure>\n</figcaption>\n</figure>\n<div>","author":{"@type":"Person","name":"cryptoskillz"},"publisher":{"@type":"Organization","name":"cryptoskillz","logo":{"@type":"ImageObject","url":"https://cryptoskillz.com/blog/media/website/logo.png","height":178,"width":685}}}</script><script src="https://cryptoskillz.com/blog/assets/js/ls.parent-fit.min.js?v=1c78585e2a70398fe95085061942fd37"></script><script async src="https://cryptoskillz.com/blog/assets/js/lazysizes.min.js?v=149ff45fc6c2f13e892e438a58abb77f"></script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://cryptoskillz.com/blog/"><img src="https://cryptoskillz.com/blog/media/website/logo.png" alt="cryptoskillz"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://cryptoskillz.com/index.html" target="_self">ECS</a></li><li><a href="https://cryptoskillz.com/blox.html" target="_self">BLOX</a></li><li><a href="https://cryptoskillz.com/about.html" target="_self">ABOUT</a></li><li class="has-submenu"><a href="https://cryptoskillz.com/blog/ecs/" target="_self" aria-haspopup="true">BLOG</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://cryptoskillz.com/blog/ecs/" target="_self">ECS</a></li><li><a href="https://cryptoskillz.com/blog/fullnode/" target="_self">FULLNODE</a></li><li><a href="https://cryptoskillz.com/blog/cyphernode/" target="_self">CYPHERNODE</a></li><li><a href="https://cryptoskillz.com/blog/trx/" target="_self">TRX</a></li></ul></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2018-11-30T12:24">November 30, 2018</time></div><h1>Working with Fullnodes part 3</h1></div></header></div><div class="wrapper post__entry"><figure class="post__image post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_nY1L26Pnm4pyiBRaVkcy3A.jpeg" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-xs.jpeg 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-sm.jpeg 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-md.jpeg 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-lg.jpeg 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-xl.jpeg 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_nY1L26Pnm4pyiBRaVkcy3A-2xl.jpeg 1600w" alt="" data-aspectratio="1.603849" width="4000" height="2494"><figcaption><figure class="ke kf kg kh ki fr x y paragraph-image"><figcaption class="az dz kx ky hh dn x y kz la au dx" data-selectable-paragraph="">Photo by <a href="https://unsplash.com/photos/FKZwWLWgGyM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">Esther Jiao</a> on <a href="https://unsplash.com/search/photos/block?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">Unsplash</a></figcaption></figure></figcaption></figure><div><br><article><div><section class="jd je jf jg jh"><div class="ae ji ab dn v w"><h1 id="012a" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Introduction</h1><p id="ad64" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">This guide aims to program a website to accept Bitcoin. In the previous tutorial, we rebuilt the server component and the back office functionality. At the end of the tutorial, we said we would be replacing "<a href="https://globee.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Globee</strong></a>" which we currently use to sell our Open Source "<a href="https://github.com/cryptoskillz/Entity-T" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Entity T-Shirt</strong></a>". Although we are going to do that still, it has been broken down into two parts as the building of the server is a sufficient enough task for this tutorial.</p><h1 id="fb17" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Acknowledgements</h1><p id="f8ca" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">The tutorial is built atop others work (as is most things in life) and would not exist without the following tutorials:</p><p id="dce2" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">The first can be found "<a class="cb bx lb lc ld le" target="_blank" href="https://medium.com/@eallam/how-im-running-a-bitcoin-full-node-on-digital-ocean-for-40-a-month-dfc328ba9604" rel="noopener noreferrer"><strong class="lu mg">here</strong></a>" and it deals with setting up a full node on "<a href="https://www.digitalocean.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Digital Ocean</strong></a>"</p><p id="3263" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">The second one can be found "<a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-16-04" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">here</strong></a>" and deals with setting up "<a href="https://www.nginx.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Nginx</strong></a><strong class="lu mg">" </strong>on "<a href="https://www.digitalocean.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Digital Ocean</strong></a>"</p><p data-selectable-paragraph=""> </p><h1 id="28bd" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Concept and design considerations</h1><p id="9a3a" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Up until this point we have hosted everything locally the"<a href="https://bitcoin.org/en/download" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg"> Bitcoin Core wallet</strong></a><strong class="lu mg">" </strong>our<strong class="lu mg"> </strong>server and so on and whilst, this is fine for testing when we actually want to use this in the real world it really ought to be on a server (though in a future tutorial we will build a payment server on a "<a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">raspberry PI</strong></a><strong class="lu mg">"</strong>).</p><p id="bad2" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We have used "<a href="https://www.digitalocean.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Digital Ocean</strong></a><strong class="lu mg">s</strong>" cheapest box ($15 a month) as we are cheap. This comes with certain restraints that with a bit of creativity we can work around. Principally we cannot have a full node running (that requires 200 gigs) instead, we run Bitcoin Core (yes I know technically we are using bitcoind now I will get to that) in "<a href="https://coinguides.org/bitcoin-blockchain-pruning/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">prune</strong></a>" mode which allows us to limit the blockchain size (We have set it to 5 gigs).</p><p id="6c57" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">The reason we can do this is that we are not using this node to secure the Bitcoin network we are using it to process payments. That said there is no harm in using a full node you will just have to have at least 200 gigs of Hard drive space which ramps up the cost (starting at $35 a month if you use the following "<a class="cb bx lb lc ld le" target="_blank" href="https://medium.com/@eallam/how-im-running-a-bitcoin-full-node-on-digital-ocean-for-40-a-month-dfc328ba9604" rel="noopener noreferrer"><strong class="lu mg">guide</strong></a>")</p><p id="9c22" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">I am going to assume you have already created a digital ocean account and added your SSH key if you have not done this please refer to this "<a class="cb bx lb lc ld le" target="_blank" href="https://medium.com/@eallam/how-im-running-a-bitcoin-full-node-on-digital-ocean-for-40-a-month-dfc328ba9604" rel="noopener noreferrer"><strong class="lu mg">guide</strong></a>" as this covers it very well.</p><h1 id="c5b1" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Digital Ocean Setup</h1><h2 id="d52f" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Create a droplet</h2><p id="7e6b" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Log in to your Digital Ocean account and click on "droplets" / "create" / "One-click apps" / "NodeJS 8.10.0 on 18.04" as shown below. <br>*note the version of node or Ubuntu may increase, this is correct as of now.</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_B9GJ839LU58qSuU7xuUnHA.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_B9GJ839LU58qSuU7xuUnHA-2xl.png 1600w" alt="" data-aspectratio="2.355346" width="2247" height="954"></figure><p id="4286" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Next, chose the $15 per month as shown below.</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_bRO_uf8-EI0v2zEEX3egjw.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_bRO_uf8-EI0v2zEEX3egjw-2xl.png 1600w" alt="" data-aspectratio="4.180970" width="2241" height="536"></figure><p id="c143" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Next, chose the data region that best suits you.</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_KgT2s8uxJmXyTdFqMdilHQ.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KgT2s8uxJmXyTdFqMdilHQ-2xl.png 1600w" alt="" data-aspectratio="2.877419" width="2230" height="775"></figure><p id="2890" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Lastly, tick the SSH key that you set up when you created your Digital Ocean account and click green create button.</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_CjiV0hK-YD5iX2tLQOu2tQ.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_CjiV0hK-YD5iX2tLQOu2tQ-2xl.png 1600w" alt="" data-aspectratio="2.456160" width="2213" height="901"></figure><p id="d45c" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">If you did all the above correctly (and why would you not have) you will be redirected to the Droplet page and when the blue bar (shown in the screenshot below) is full your droplet will be ready to use. You will receive an email with your password for this Droplet, take a note of this as we will require it later.</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_KrJV6Y7EhBfgWuN_XEi_5Q.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_KrJV6Y7EhBfgWuN_XEi_5Q-2xl.png 1600w" alt="" data-aspectratio="4.223684" width="2247" height="532"></figure><p id="0201" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Click on the droplet name and copy the IP address (top left) by clicking it</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_G6pC40Cp2Sq66Zj1jw9qCg.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_G6pC40Cp2Sq66Zj1jw9qCg-2xl.png 1600w" alt="" data-aspectratio="3.208333" width="2233" height="696"></figure><h2 id="446b" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Access the droplet</h2><p id="7ee3" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Open a terminal session and enter the following command replacing the IP address with the IP address of your Droplet. This will ask you to enter the password (the one that was emailed to you) and then ask you to enter a new password (twice).<br>*Note, replace the IP address below with the one of your Droplet</p><pre class="ke kf kg kh ki dv ge df"><span id="b58a" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">ssh root@207.154.217.166</span></pre><p id="b1f0" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Once you have logged in you will see something like the screenshot below</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_fTES3ZAK0w2HtgXhyg0Urw.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_fTES3ZAK0w2HtgXhyg0Urw-2xl.png 1600w" alt="" data-aspectratio="1.128532" width="1238" height="1097"></figure><p id="623b" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Now we have accessed the Droplet it is time to set up it up correctly and install the necessary software.</p><h1 id="4169" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Bitcoin core</h1><h2 id="4bf1" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 1: Install Bitcoin Core</h2><p id="f8da" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We will be installing is the command line version of Bitcoin Core which is known as Bitcoind. It works pretty much the same, all the RPC calls are the same etc. The main difference being that there is no "<a href="https://en.wikipedia.org/wiki/Graphical_user_interface" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">GUI</strong></a>", welcome to the world of servers where the terminal is your best friend.</p><p id="5990" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">To install bitcoind run the following commands:</p><pre class="ke kf kg kh ki dv ge df"><span id="a22d" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo apt-add-repository ppa:bitcoin/bitcoin<br>sudo apt-get update<br>sudo apt-get install bitcoind</span></pre><h2 id="93d2" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 2: Configure Bitcoin Core</h2><p id="08fb" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">First, we have to create a directory to store out Bitcoin configuration file. We do this by using the command below</p><pre class="ke kf kg kh ki dv ge df"><span id="aeaa" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">mkdir ~/.bitcoin</span></pre><p id="fe13" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Next, we have to create the config file in the directory we just created.</p><pre class="ke kf kg kh ki dv ge df"><span id="8c1a" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo nano ~/.bitcoin/bitcoin.conf</span></pre><p id="53c9" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Paste the text below into the file and save it (ctrl x)</p><pre class="ke kf kg kh ki dv ge df"><span id="3ac6" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph=""># Generated by <a href="https://jlopp.github.io/bitcoin-core-config-generator/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">https://jlopp.github.io/bitcoin-core-config-generator/</a></span><span id="ebe8" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph=""># This config should be placed in following path:<br># ~/.bitcoin/bitcoin.conf</span><span id="96df" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph=""># [core]<br># Set database cache size in megabytes; machines sync faster with a larger cache. Recommend setting as high as possible based upon machine's available RAM.<br>dbcache=5000<br></span><span id="bcb0" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph=""># [rpc]<br># Accept command line and JSON-RPC commands.<br>server=1<br># Username for JSON-RPC connections<br>rpcuser=test<br># Password for JSON-RPC connections<br>rpcpassword=test</span></pre><p id="c928" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Let’s take a look at what this config file is doing.</p><p id="e1a8" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">dbcache</strong>: This is the size of the database cache.<br><strong class="lu mg">server</strong>: This allows us to use "<a href="https://en.bitcoin.it/wiki/API_reference_(JSON-RPC)" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">RPC</strong></a>" commands<br><strong class="lu mg">rpcuser</strong>: The username for the RPC server<br><strong class="lu mg">rpcpassword</strong>: The password for the RPC server</p><p id="b06f" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">*Note it would be wise to change the username and password to something stronger</p><p id="93a8" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Finally, we want bitcoind to restart if it crashes we do this by creating a service for it. Type the following into the terminal</p><pre class="ke kf kg kh ki dv ge df"><span id="f37b" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo nano /lib/systemd/system/bitcoin.service</span></pre><p id="32be" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">and paste in the following into the file and save (Ctrl + x)</p><pre class="ke kf kg kh ki dv ge df"><span id="1e92" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">[Unit]<br>Description=Bitcoin's distributed currency daemon<br>After=network.target</span><span id="538b" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph="">[Service]<br>User=root<br>#Group=</span><span id="e76c" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph="">Type=forking<br>ExecStart=/usr/bin/bitcoind -daemon  -server -rest -testnet  -deprecatedrpc=signrawtransaction -prune=5000</span><span id="900b" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph="">Restart=always<br>PrivateTmp=true<br>TimeoutStopSec=60s<br>TimeoutStartSec=2s<br>StartLimitInterval=120s<br>StartLimitBurst=5</span><span id="229a" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph="">[Install]<br>WantedBy=multi-user.target</span></pre><h2 id="593f" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 3: Run Bitcoin Core</h2><p id="49cb" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">To start the service we run the following command.</p><pre class="ke kf kg kh ki dv ge df"><span id="b98d" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo service bitcoin start</span></pre><h2 id="d984" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 4: Encrypt Wallet</h2><p id="5a41" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">The next thing we want to do is "<a href="https://en.bitcoin.it/wiki/Wallet_encryption" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">encrypt</strong></a>" the wallet. We do this by running the following command.</p><pre class="ke kf kg kh ki dv ge df"><span id="021e" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">bitcoin-cli -testnet encryptwallet test</span></pre><h2 id="9622" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 5: Create a swap file</h2><p id="6d51" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Downloading the initial blockchain is a very memory intensive task and as we are running on a cheap Droplet we do not have enough memory to perform the task. Luckily we have a solution to can create a swap file.</p><p id="14f5" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We can create a 4 Gigabyte file by typing:</p><pre class="ke kf kg kh ki dv ge df"><span id="d79b" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo fallocate -l 4G /swapfile</span></pre><p id="9c0d" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">The file is created, but the system does not know that this is supposed to be used for swap. We need to tell the system to format this file as swap and then enable it.</p><p id="c13a" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Firstly, we need to adjust the permissions on our file so that it isn’t readable by anyone besides root. Allowing other users to read or write to this file would be a huge security risk. We can lock down the permissions by typing:</p><pre class="ke kf kg kh ki dv ge df"><span id="d731" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo chmod 600 /swapfile</span></pre><p id="b199" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Now that our file is more secure, we can tell our system to set up the swap space by typing:</p><pre class="ke kf kg kh ki dv ge df"><span id="972c" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo mkswap /swapfile</span></pre><p id="c03c" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Our file is now ready to be used as a swap space. We enable this by typing:</p><pre class="ke kf kg kh ki dv ge df"><span id="72a4" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo swapon /swapfile</span></pre><p id="8f82" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We can verify that the procedure was successful by checking whether our system reports swap space now:</p><pre class="ke kf kg kh ki dv ge df"><span id="5c69" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo swapon -s</span></pre><p id="0174" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We have our swap file enabled, but when we reboot, the server will not automatically enable the file to have to edit the fstab to enable this.</p><pre class="ke kf kg kh ki dv ge df"><span id="a407" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo nano /etc/fstab</span></pre><p id="bb92" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">At the bottom of the file, add a line that will tell the operating system to automatically use the created file:</p><pre class="ke kf kg kh ki dv ge df"><span id="a2dd" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">/swapfile   none    swap    sw    0   0</span></pre><p id="205f" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Now we have a swap file this will help a lot with the initial download of the blockchain.</p><h2 id="c8aa" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">step 6: disable logging</h2><p id="24a0" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">This step is not necessary but the Bitcoin log file can get huge and is of little use in our circumstance. Bitcoin does not have a way to disable logging but we have a trick do that we simply write it to dev/null which essentially is putting it in the trash.</p><pre class="ke kf kg kh ki dv ge df"><span id="34e1" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">cd ~/.bitcoin &amp;&amp; rm -f /.bitcoin/testnet3/debug.log &amp;&amp; ln -s /dev/null debugtn3.log</span></pre><h2 id="a0ab" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 7: Test It is Running</h2><p id="9715" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Now bitcoind is running we can do a couple of tests using bitcoin-cli.</p><p id="cfa5" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">bitcoin-cli</strong> is a command-line interface for Bitcoin Core client that connects to a running instance of bitcoind daemon. A user can interact with this program and do any necessary functions with it that will control the bitcoind service as well as the possibility of using a Bitcoin wallet to send and receive funds.</p><h2 id="594b" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">getblockchaininfo</h2><p id="653e" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Returns information about the blockchain</p><pre class="ke kf kg kh ki dv ge df"><span id="158c" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">bitcoin-cli -testnet getblockchaininfo</span></pre><h2 id="3849" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">getblockcount</h2><p id="0023" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Returns the current block count.</p><pre class="ke kf kg kh ki dv ge df"><span id="cdc9" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">bitcoin-cli -testnet getblockcount</span></pre><h2 id="0587" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">get connections</h2><p id="cef2" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Returns the number of active connections.</p><pre class="ke kf kg kh ki dv ge df"><span id="afd6" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">bitcoin-cli -testnet getnetworkinfo | grep connections</span></pre><h2 id="ead9" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">test the REST</h2><p id="0e04" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Run a curl command to get make sure rest is running.</p><pre class="ke kf kg kh ki dv ge df"><span id="b2d0" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">curl http://127.0.0.1:18332<a href="http://104.248.120.120:18332/rest/chaininfo.json" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">/rest/chaininfo.json</a></span></pre><h1 id="da4b" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Configure Server</h1><h2 id="210f" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 1: Install Nginx</h2><p id="5af0" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">First, we install "<a href="https://www.nginx.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">N<strong class="lu mg">ginx</strong></a>":</p><pre class="ke kf kg kh ki dv ge df"><span id="2c40" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo apt-get install nginx</span></pre><h2 id="7127" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 2: Adjust the Firewall</h2><p id="6e19" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Next, we reconfigure our firewall software to allow access to the service. We</p><p id="faed" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">At this point, as we will not configure SSL (as we will use "<a href="https://www.cloudflare.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Cloudflare</strong></a>") for that we enable Nginx to allow traffic on port 80 by typing:</p><pre class="ke kf kg kh ki dv ge df"><span id="dd9a" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">sudo ufw allow 'Nginx HTTP'</span></pre><h1 id="0ae0" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Step 3: Check your Web Server</h1><p id="d74b" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">If the above has been done correctly you should be able to browse to your site by browsing to the IP address of the Droplet.<br>*Note, replace the IP address below with the one of your Droplet</p><pre class="ke kf kg kh ki dv ge df"><span id="3436" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph=""><a href="http://207.154.217.166/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">http://207.154.217.166</a></span></pre><p id="91a0" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">if it worked you will see the Nginx default webpage as shown below</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_dUdwg6qW_UIIEZcwLLmuWA.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_dUdwg6qW_UIIEZcwLLmuWA-2xl.png 1600w" alt="" data-aspectratio="2.721698" width="577" height="212"></figure><h2 id="363d" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 4: Install Server</h2><p id="8135" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Now we have to load our "<a href="https://github.com/cryptoskillz/Bitcoin-Tutorial/tree/part13-replace-globee/server" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">e-commerce code</strong></a><strong class="lu mg">"</strong> onto the server we do this using "<a href="https://git-scm.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">git</strong></a>".</p><p id="0a97" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Firstly, init a new "<a href="https://git-scm.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">git</strong></a>" repo</p><pre class="ke kf kg kh ki dv ge df"><span id="a626" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">git init</span></pre><p id="8020" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Next, we add a repo</p><pre class="ke kf kg kh ki dv ge df"><span id="8cdf" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">git remote add github <a href="https://github.com/cryptoskillz/Bitcoin-Tutorial.git" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">https://github.com/cryptoskillz/Bitcoin-Tutorial.git</a></span></pre><p id="35dd" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Finally, pull the latest code</p><pre class="ke kf kg kh ki dv ge df"><span id="adec" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">git pull github master</span></pre><h2 id="7678" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Step 5: Starting the server</h2><p id="c117" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Just like when we run it locally we can start the server by typing the following</p><pre class="ke kf kg kh ki dv ge df"><span id="7307" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">cd server<br>node app.js</span></pre><p id="7a65" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Now, we can test this by opening the following URL in a browser<br>*Note, replace the IP address below with the one of your Droplet</p><pre class="ke kf kg kh ki dv ge df"><span id="6d62" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph=""><a href="http://207.154.217.166/backoffice/test" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">http://207.154.217.166/backoffice/test</a></span></pre><p id="4907" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">If it has been successful you will see something like the screenshot below</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_VU3y_ZZd2q6GvlBwTR6lkQ.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_VU3y_ZZd2q6GvlBwTR6lkQ-2xl.png 1600w" alt="" data-aspectratio="2.208897" width="1142" height="517"></figure><p id="6c35" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Of course just like bitcoind we want to the e-commerce server to keep running after crashes etc. We do this by using a package called "<a href="https://www.npmjs.com/package/forever" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">forerver.js</strong></a>".</p><p id="2ca0" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Install forever by typing the following command:</p><pre class="ke kf kg kh ki dv ge df"><span id="6f1d" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">npm install forever -g</span></pre><p id="682b" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Then add our app to it (make sure you are in the server directory)</p><pre class="ke kf kg kh ki dv ge df"><span id="213f" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">forever start app.js</span></pre><p id="7042" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We can now test everything worked as excepted by leaving the terminal session by typing the following</p><pre class="ke kf kg kh ki dv ge df"><span id="d730" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">exit</span></pre><p id="8b0a" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">and then requesting a Bitcoin Address from the server in a browser</p><pre class="ke kf kg kh ki dv ge df"><span id="e5dd" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph=""><a href="http://207.154.217.166/api/address?uid=3" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">http://207.154.217.166/api/address?uid=3</a></span></pre><p id="8378" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">If it worked you will see something like the screenshot below. This is the server returning us a new bitcoin address</p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/15/1_4hfSwQLfn2NcQD5-dRE6qQ.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-md.png 768w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/15/responsive/1_4hfSwQLfn2NcQD5-dRE6qQ-2xl.png 1600w" alt="" data-aspectratio="2.716763" width="1410" height="519"></figure><h2 id="e727" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph="">Add A Record</h2><p id="8f07" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We add an A record in Cloudflare so it is a better URL we have pointed our server to "<a href="http://ecs.cryptoskillz.com/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">ecs.cryptoskillz.com</strong></a><strong class="lu mg">". </strong>If you want to know how to set up an A record on Cloudflare click "<a href="https://www.digitalocean.com/community/tutorials/how-to-mitigate-ddos-attacks-against-your-website-with-cloudflare" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">here</strong></a>".</p><h1 id="6fbb" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">E-commerce server changes</h1><p id="4150" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">The latest code can be found "<strong><a href="https://github.com/cryptoskillz/Bitcoin-Tutorial/tree/part13-replace-globee" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">here</a>"</strong>. As we only made a couple changes so we will quickly cover them below.</p><h2 id="fe2e" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph=""><a href="https://github.com/cryptoskillz/Bitcoin-Tutorial/blob/part13-replace-globee/server/app.js" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">app.js</a></h2><p id="7ad3" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We added a check to make sure the process.env vars were set and if not use defaults. This should make it work on a number of servers such as VPS that does not allow you to set environment vars.</p><p id="734c" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">*Note, you will see I set the port to 8080 this is again so it will work out of the box on the most number of configurations.</p><pre class="ke kf kg kh ki dv ge df"><span id="b788" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">if (process.env.emailsmtp == undefined)<br>  process.env.emailsmtp = 'smtp.ethereal.email';<br>if (process.env.emailusername == undefined)<br>  process.env.emailusername = 'rjf2z2dghi4bn3yv@ethereal.email';<br>if (process.env.emailpassword == undefined)<br>  process.env.emailpassword = 'NG4PPPuqvZaagwSjWV';<br>if (process.env.walletpassphrase == undefined)<br>  process.env.walletpassphrase = 'test';<br>if (process.env.walletaccount == undefined)<br>  process.env.walletaccount = 'theaccount';<br>if (process.env.PORT == undefined)<br>  process.env.PORT = 8080;</span></pre><p id="de5a" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Finally, We added an RPC call to the test back office/test endpoint so we can easily get a block count (good for testing)</p><pre class="ke kf kg kh ki dv ge df"><span id="de96" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">app.get("/backoffice/test", (req, res) =&gt; {<br>  //load the back office helper<br>  let backofficehelper = require('./api/helpers/backoffice.js').backOffice;<br>  let backoffice = new backofficehelper();</span><span id="96d8" class="mm lg bf av nj b dz np nq nr ns nt nl l nm" data-selectable-paragraph="">//debug<br>  backoffice.test(req,res);<br>});</span></pre><h2 id="55ae" class="mm lg bf av au el mn mo mp mq mr ms mt mu mv mw mx" data-selectable-paragraph=""><a href="https://github.com/cryptoskillz/Bitcoin-Tutorial/blob/part13-replace-globee/server/api/helpers/backoffice.js" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">backoffice.js</a></h2><pre class="ke kf kg kh ki dv ge df"><span id="07f7" class="mm lg bf av nj b dz nk nl l nm" data-selectable-paragraph="">this.test = function test(req,res) <br> {<br>     client.walletPassphrase(process.env.walletpassphrase, 10).then(() =&gt; {<br>      //create a new address in theaccount account :]<br>      client.getBlockCount().then(count =&gt; {<br>        res.send(JSON.stringify({ status: "ok","count":count }));<br>      });<br>    });</span></pre><p id="c1d6" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We also made some changes to CDN js but they are unused as yet the will be covered in the next tutorial.</p><h1 id="1ed5" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Conclusion</h1><p id="f998" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We have successfully deployed a Bitcoin Core node to a $15 a month Digital Ocean Droplet (which is about the cheapest way possible to have a Bitcoin Node) and installed our e-commerce server. Next time we will configure www, CDN and admin to use this new server. We will also update WWW so we can finally sell our T-Shirt using not 3rd parties!</p></div></section></div></article></div><div> </div><div> </div></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on September 20, 2019</p><ul class="post__tag"><li><a href="https://cryptoskillz.com/blog/ecs/">ecs</a></li><li><a href="https://cryptoskillz.com/blog/fullnode/">fullnode</a></li></ul><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fcryptoskillz.com%2Fblog%2Fworking-with-fullnodes-part-3.html&amp;via=crypto_skillz&amp;text=Working%20with%20Fullnodes%20part%203" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span></a></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://cryptoskillz.com/blog/backoffice-and-server-refactor.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Backoffice and server refactor</a></div><div class="post__nav-next"><a href="https://cryptoskillz.com/blog/finally-removing-globee.html" class="invert post__nav-link" rel="next"><span>Next</span> Finally removing GloBee </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__comments"><div class="wrapper"><h2 class="h5">Comments</h2><div id="disqus_thread"></div><script>var disqus_config = function () {
                       this.page.url = 'https://cryptoskillz.com/blog/working-with-fullnodes-part-3.html';
               		this.page.identifier = '15';
                       this.page.title = ' Working with Fullnodes part 3';
                   };
               
                   var disqus_loaded = false;
               
                   function publiiLoadDisqus() {
                       if(disqus_loaded) {
                           return false;
                       }
               
                       var top = document.getElementById('disqus_thread').offsetTop;
               
                       if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                           disqus_loaded = true;
               
                           (function () {
                               var d = document, s = d.createElement('script');
                               s.src = 'https://cryptoskillz-1.disqus.com/embed.js';
                               s.setAttribute('data-timestamp', +new Date());
                               (d.head || d.body).appendChild(s);
                           })();
                       }
                   }
               
                   publiiLoadDisqus();
               
                   window.onscroll = function() {
                       publiiLoadDisqus();
                   };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></main><footer class="footer"><div class="footer__social"><a href="crypto_skillz" aria-label="Twitter"><svg><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#twitter"/></svg></a></div><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener noreferrer">Publii Static CMS</a></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'overlay',
        animationSpeed: 300,
        submenuWidth: 240,
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://cryptoskillz.com/blog/assets/js/scripts.min.js?v=f56b13ba141d95ea2a0b7aab75ca9528"></script><script>var lazyFeaturedImage=function lazyFeaturedImage(){var b=document.querySelectorAll(".hero__image-img");for(var a=0;a<b.length;a++){var c=b[a];c.addEventListener("lazyloaded",function(f){var d=f.target.parentNode;d.classList.add("hero__image--overlay")})}};lazyFeaturedImage();</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-111636971-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111636971-1');</script></body></html>