<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Integrating 3rd party Lightning - cryptoskillz</title><meta name="description" content="ECS (e-commerce software) is an open source Bitcoin e-commerce server. It comes with a Javascript e-commerce injector a REST server and an admin control panel. "><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://cryptoskillz.com/blog/integrating-3rd-party-lightning.html"><link rel="amphtml" href="https://cryptoskillz.com/blog/amp/integrating-3rd-party-lightning.html"><link rel="alternate" type="application/atom+xml" href="https://cryptoskillz.com/blog/feed.xml"><link rel="alternate" type="application/json" href="https://cryptoskillz.com/blog/feed.json"><meta property="og:title" content="Integrating 3rd party Lightning"><meta property="og:image" content="https://cryptoskillz.com/blog/media/website/logo.png"><meta property="og:site_name" content="cryptoskillz"><meta property="og:description" content="ECS (e-commerce software) is an open source Bitcoin e-commerce server. It comes with a Javascript e-commerce injector a REST server and an admin control panel. "><meta property="og:url" content="https://cryptoskillz.com/blog/integrating-3rd-party-lightning.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,h1,.h1,blockquote,.search__input,.author__name,.author__info>p,.feed__item h2,.post__nav-link{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://cryptoskillz.com/blog/assets/css/style.css?v=58acac63961d23abccded091eaca6989"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cryptoskillz.com/blog/integrating-3rd-party-lightning.html"},"headline":"Integrating 3rd party Lightning","datePublished":"2019-01-23T12:29","dateModified":"2019-09-20T12:29","image":{"@type":"ImageObject","url":"https://cryptoskillz.com/blog/media/website/logo.png","height":178,"width":685},"description":"<figure class=\"post__image post__image\" ><img src=\"https://cryptoskillz.com/blog/media/posts/18/1_a22cZdqrqt3k_KXL4CcfDg.jpeg\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-xs.jpeg 300w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-sm.jpeg 480w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-md.jpeg 768w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-lg.jpeg 1024w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-xl.jpeg 1360w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-2xl.jpeg 1600w\"  alt=\"\" width=\"2088\" height=\"3152\">\n<figcaption >\n<figure class=\"ke kf kg kh ki fr x y paragraph-image\">\n<figcaption class=\"az dz kx ky hh dn x y kz la au dx\" data-selectable-paragraph=\"\">Photo by <a href=\"https://unsplash.com/photos/3qucB7U2l7I?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\" class=\"cb bx lb lc ld le\" target=\"_blank\" rel=\"noopener noreferrer\">Brandon Morgan</a> on <a href=\"https://unsplash.com/search/photos/lightning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\" class=\"cb bx lb lc ld le\" target=\"_blank\" rel=\"noopener noreferrer\">Unsplash</a></figcaption>\n</figure>\n</figcaption>\n</figure>\n","author":{"@type":"Person","name":"cryptoskillz"},"publisher":{"@type":"Organization","name":"cryptoskillz","logo":{"@type":"ImageObject","url":"https://cryptoskillz.com/blog/media/website/logo.png","height":178,"width":685}}}</script><script src="https://cryptoskillz.com/blog/assets/js/ls.parent-fit.min.js?v=1c78585e2a70398fe95085061942fd37"></script><script async src="https://cryptoskillz.com/blog/assets/js/lazysizes.min.js?v=149ff45fc6c2f13e892e438a58abb77f"></script><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-4710117865976591",
enable_page_level_ads: true
});</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://cryptoskillz.com/blog/"><img src="https://cryptoskillz.com/blog/media/website/logo.png" alt="cryptoskillz"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://cryptoskillz.com/index.html" target="_self">ECS</a></li><li><a href="https://cryptoskillz.com/blox.html" target="_self">BLOX</a></li><li><a href="https://cryptoskillz.com/about.html" target="_self">ABOUT</a></li><li class="has-submenu"><a href="https://cryptoskillz.com/blog/ecs/" target="_self" aria-haspopup="true">BLOG</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://cryptoskillz.com/blog/ecs/" target="_self">ECS</a></li><li><a href="https://cryptoskillz.com/blog/fullnode/" target="_self">FULLNODE</a></li><li><a href="https://cryptoskillz.com/blog/cyphernode/" target="_self">CYPHERNODE</a></li></ul></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2019-01-23T12:29">January 23, 2019</time></div><h1>Integrating 3rd party Lightning</h1></div></header></div><div class="wrapper post__entry"><figure class="post__image post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/18/1_a22cZdqrqt3k_KXL4CcfDg.jpeg" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-xs.jpeg 300w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-sm.jpeg 480w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-md.jpeg 768w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-lg.jpeg 1024w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-xl.jpeg 1360w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_a22cZdqrqt3k_KXL4CcfDg-2xl.jpeg 1600w" alt="" data-aspectratio="0.662437" width="2088" height="3152"><figcaption><figure class="ke kf kg kh ki fr x y paragraph-image"><figcaption class="az dz kx ky hh dn x y kz la au dx" data-selectable-paragraph="">Photo by <a href="https://unsplash.com/photos/3qucB7U2l7I?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">Brandon Morgan</a> on <a href="https://unsplash.com/search/photos/lightning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">Unsplash</a></figcaption></figure></figcaption></figure><article><div><section class="jd je jf jg jh"><div class="ae ji ab dn v w"><h1 id="8272" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Introduction</h1><p id="ad64" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">This guide aims to program a website to accept "<a href="https://bitcoin.org/en/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">Bitcoin</strong></a>". In the previous tutorial, We added "<a href="https://strike.acinq.co/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">strike</strong></a>" as a standalone project. This time we are going to fully integrate it into our "<a href="https://github.com/cryptoskillz/ECS/tree/strikeintegration/server" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">server</strong></a>" and "<a href="https://github.com/cryptoskillz/ECS/tree/strikeintegration/cdn" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">CDN</strong></a>" ("<a href="https://github.com/cryptoskillz/ECS/blob/strikeintegration/cdn/js/sr.js" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">sr.js</strong></a>")</p><p data-selectable-paragraph=""> </p><h1 id="8136" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">The SQL</h1><p id="e9c5" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">The SQL in this release changed a lot as we are now offering multipile payment types we could no longer rely on the BTC address to be the join across the tables. Also because a lightning payment requires an amount which we do not always have we cannot cache a lightning address the way we do a Bitcoin one.</p><p id="3c3f" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">As a result, we implemented a session which is based on "<a href="https://www.npmjs.com/package/uuid" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">uuidv1</strong></a>"</p><p id="7e9c" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We changed the name of the session table to "usersessions" added a session id as well as changed address into 2 fields "btcaddress" and "lightaddress". Note we could have used an address lookup table here to manage many types, however, we will most likely only support BTC and Lightning(if this changes we can easily implement this change)</p><p id="feb7" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We also added a timestamp so we know when the session was created in case we ever decided to add features such as cart abandonment etc.</p><pre class="ke kf kg kh ki dv ge df"><span id="5176" class="mm lg bf av mn b dz mo mp l mq" data-selectable-paragraph="">CREATE TABLE `usersessions` (<br> `id` INTEGER PRIMARY KEY AUTOINCREMENT,<br> `processed` INTEGER DEFAULT 0,<br> `swept` INTEGER DEFAULT 0,<br> `userid` INTEGER,<br> `net` INTEGER DEFAULT 1,<br> `amount` TEXT DEFAULT 0,<br> `paymenttype` INTEGER DEFAULT 1,<br> `sessionid` TEXT,<br> `sessiontime` INTEGER,<br> `btcaddress` TEXT,<br> `lightaddress` TEXT<br>);</span></pre><p id="3243" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">The only other changes we made was to replace the "address" join in other fields and use "sessoinid" as well.</p><h1 id="24b6" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">The Code</h1><p id="9cf2" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">The branch for the code for this release can be found "<a href="https://github.com/cryptoskillz/ECS/tree/strikeintegration" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">here</strong></a>"</p><h2 id="4cea" class="mm lg bf av au el mr ms mt mu mv mw mx my mz na nb" data-selectable-paragraph="">WWW</h2><p id="592e" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We made one small change to the init function and that as to pass in the ability to turn Lightning on or off.</p><pre class="ke kf kg kh ki dv ge df"><span id="79e9" class="mm lg bf av mn b dz mo mp l mq" data-selectable-paragraph="">&lt;script type="text/javascript"&gt;<br>       /*<br>          0 = server url<br>          1 = animated<br>          2 = quantity count<br>          3 = cdn url<br>          4 = uid<br>          5 = theme<br>          6 = billing address <br>          7 = shipping address<br>          8 = start country<br>          9 = lighting enabled<br>       */</span><span id="8fcb" class="mm lg bf av mn b dz nc nd ne nf ng mp l mq" data-selectable-paragraph=""><br>       //local<br>SR.init([<br>"<a href="http://127.0.0.1:3030/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">http://127.0.0.1:3030/</a>",<br>false,<br>15,<br>"<a href="http://127.0.0.1:8081/cdn/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8081/cdn/</a>",<br>"3",<br>"",<br>1,<br>1,<br>"GB",<br>1<br>]);</span></pre><h2 id="af55" class="mm lg bf av au el mr ms mt mu mv mw mx my mz na nb" data-selectable-paragraph="">CDN / SERVER</h2><p id="a1c8" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">Most the changes this time were in "<a href="https://github.com/cryptoskillz/ECS/blob/strikeintegration/cdn/js/sr.js" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">SR.js</strong></a>" the "<a href="https://github.com/cryptoskillz/ECS/tree/strikeintegration/server" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">server</strong></a>" was obviously updated to handle the new requests. As I said we are no longer going to be listing all the code (as it is getting too long to read in a blog format) we will cover the salient updates.</p><p id="ce2e" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">Session Generation</strong></p><p id="defa" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We now store a cookie in a session which means everytime you now do a hard refresh you call the server and create a new session. This not only speeds things up allows us to have multiple payment types in one session. Note we did not retrieve the cart contents on a hard refresh but we will do that in a future update.</p><p id="322d" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">It also has the added bonus of giving us a preloader (in a way) which use (at present) to generate a BTC address but can make it do a lot. One idea as mentioned above is to send the user cart so we maintain cart integrity over time, hard refreshes etc.</p><p id="8210" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">Multipile payment types</strong></p><figure class="post__image"><img class="lazyload" data-src="https://cryptoskillz.com/blog/media/posts/18/1_6Nxhy4i_b5kAX61HTSoDeg.png" data-sizes="auto" data-srcset="https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-xs.png 300w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-sm.png 480w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-md.png 768w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-lg.png 1024w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-xl.png 1360w ,https://cryptoskillz.com/blog/media/posts/18/responsive/1_6Nxhy4i_b5kAX61HTSoDeg-2xl.png 1600w" alt="" data-aspectratio="1.685166" width="1670" height="991"></figure><p id="714e" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Now we have Lightning and Bitcoin to chose from this branches a number of UX flow and if we added more the complexity would rise more so we had to refactor the whole address/generation functionality on both the CDN and SERVER.</p><p id="3a71" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">Server webhooks</strong></p><p id="82ba" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We had a lot of code in server webhooks which did not have to be there so we removed it and refactored the function.</p><p id="b928" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph=""><strong class="lu mg">Misc</strong></p><p id="3822" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">We fixed numerous bugs and refactored how a lot of the server code is working. It is a lot more friendly to work with now.</p><h2 id="417c" class="mm lg bf av au el mr ms mt mu mv mw mx my mz na nb" data-selectable-paragraph="">Admin</h2><p id="6887" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">We made minimal changes to the admin, mainly the being able to deal with Lighting payments and the new session code. In a future update, we will focus exclusively on the admin as there is a lot we can be adding to improve this section.</p><p data-selectable-paragraph=""> </p><h1 id="e6de" class="lf lg bf av au el lh li lj lk ll lm ln lo lp lq lr" data-selectable-paragraph="">Conclusion</h1><p id="6c4c" class="ls lt bf av lu b lv lw lx ly lz ma mb mc md me mf" data-selectable-paragraph="">This now gives us a pretty decent platform to deal with Bitcoin and Lightning payments. Of course, we are going to replace "<a href="https://strike.acinq.co/" class="cb bx lb lc ld le" target="_blank" rel="noopener noreferrer"><strong class="lu mg">strike</strong></a>" at some point with code completely under our control but this is adequate for now.</p><p id="336a" class="ls lt bf av lu b lv mh lx mi lz mj mb mk md ml mf" data-selectable-paragraph="">Next time around we will either clean up all the code and do a full regression in which case there will be no tutorial or implement an address cache method to be able to run ECS without any BTC node running on the server.</p></div></section></div></article><div class="eb ec ed m ee ef eg eh ei e" data-test-id="post-sidebar"> </div></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on September 20, 2019</p><ul class="post__tag"><li><a href="https://cryptoskillz.com/blog/ecs/">ecs</a></li></ul><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fcryptoskillz.com%2Fblog%2Fintegrating-3rd-party-lightning.html&amp;via=crypto_skillz&amp;text=Integrating%203rd%20party%20Lightning" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span></a></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://cryptoskillz.com/blog/adding-3rd-party-lightning.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Adding 3rd party Lightning</a></div><div class="post__nav-next"><a href="https://cryptoskillz.com/blog/the-casa-node.html" class="invert post__nav-link" rel="next"><span>Next</span> The Casa Node </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__comments"><div class="wrapper"><h2 class="h5">Comments</h2><div id="disqus_thread"></div><script>var disqus_config = function () {
                       this.page.url = 'https://cryptoskillz.com/blog/integrating-3rd-party-lightning.html';
               		this.page.identifier = '18';
                       this.page.title = ' Integrating 3rd party Lightning';
                   };
               
                   var disqus_loaded = false;
               
                   function publiiLoadDisqus() {
                       if(disqus_loaded) {
                           return false;
                       }
               
                       var top = document.getElementById('disqus_thread').offsetTop;
               
                       if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                           disqus_loaded = true;
               
                           (function () {
                               var d = document, s = d.createElement('script');
                               s.src = 'https://cryptoskillz-1.disqus.com/embed.js';
                               s.setAttribute('data-timestamp', +new Date());
                               (d.head || d.body).appendChild(s);
                           })();
                       }
                   }
               
                   publiiLoadDisqus();
               
                   window.onscroll = function() {
                       publiiLoadDisqus();
                   };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></main><footer class="footer"><div class="footer__social"><a href="crypto_skillz" aria-label="Twitter"><svg><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#twitter"/></svg></a></div><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener noreferrer">Publii Static CMS</a></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://cryptoskillz.com/blog/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'overlay',
        animationSpeed: 300,
        submenuWidth: 240,
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://cryptoskillz.com/blog/assets/js/scripts.min.js?v=f56b13ba141d95ea2a0b7aab75ca9528"></script><script>var lazyFeaturedImage=function lazyFeaturedImage(){var b=document.querySelectorAll(".hero__image-img");for(var a=0;a<b.length;a++){var c=b[a];c.addEventListener("lazyloaded",function(f){var d=f.target.parentNode;d.classList.add("hero__image--overlay")})}};lazyFeaturedImage();</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-111636971-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111636971-1');</script></body></html>