
<!DOCTYPE html>
<!--[if IE 9]>    <html class="ie9" lang="en"> <![endif]-->
<html class="" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cryptoskillz</title>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i%7cSource+Sans+Pro:300" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<!-- Main Bootstrap CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
<!-- Owl Carousel CSS -->
<link href="css/owl.carousel.min.css" rel="stylesheet" type="text/css">
<!-- Owl Carousel Default Theme  CSS -->
<link href="css/owl.theme.default.min.css" rel="stylesheet" type="text/css">
<!-- Animate CSS  -->
<link href="css/animate.css" rel="stylesheet" type="text/css">
<!-- Magnific Popup CSS  -->
<link href="css/magnific-popup.css" rel="stylesheet" type="text/css">
<!-- Main CSS  -->
<link href="css/style.css" rel="stylesheet" type="text/css">
<!-- Modernizer JS Script -->
<script src="js/lib/modernizr-min.js" type="text/javascript"></script>
</head>
<body>  
    <div id="page-wrap">
        <header id="top-main-header" class="navbar">
            <div id="top-main-header-in" class="container">                             
               <div class="navbar-left">
                    <a class="navbar-brand" href="index.html">
                        <img src="images/logo.png" alt="cryptoskillz logo">
                    </a>
                    <!--.navbar-brand--> 

                    <ul class="nav navbar-nav main-nav">
                    
                       <li><a href="https://cryptoskillz.com/srcrypto/prod/www/">Store</a></li>
                       <li><a href="https://medium.com/@cryptoskillz_58791/ethos-b1ca4fbd0b0c" target="_blank">Ethos</a></li>
                        <li><a href="ecs.html">ECS</a></li>
                        <li><a href="light.html">Lightning Demo</a></li>

                        
                    </ul>
                    <!--.navbar-nav--> 
               </div>
               <!--.navbar-left-->
                
                <div class="navbar-right">
                    
                </div>
                <!--.navbar-right-->                
            </div>
            <!--#top-main-header-in-->
        </header>
        <!--#top-main-header-->
        <div id="hero-section" class="hero-flexed-style hero-form">
           <!--.hero-bg-media-holder-->         
            <div class="container section-content-container">
                <div class="row section-padd-hor">
                   <div class="col-md-12 section-content-cols">
                      
                      <div class="hero-copy">
                            <div class="hero-copy-title wow fadeInDown" data-wow-delay="0.3s" data-wow-duration="1s">
                                <h1>ECS</h1>
                            </div>
                            <!--.hero-copy-title-->

                            <div class="hero-copy-desc wow fadeInDown" data-wow-delay="0.5s" data-wow-duration="1s">
                                <p>Send us BTC via Lightning using the QR code on the right.  You will gain nothing from this transaction.</p>


                            </div>
                            <!--.hero-copy-desc-->
                       </div>
                       <!--.hero-copy--> 
                       
                       <div class="hero-media">
                        <div id="order-preload" align="center">
                          <div >Generating Invoice...</div>
                          <div class="lds-dual-ring"></div>
                        </div>
                        <div class="order-qrcode" id="order-qrcode" style="display: none">
                          <div id="order-details">
                            <div  align="center">
                              <div class="order-pr--number" id="order-id"></div>
                              <span class="order-pr--pay" id="order-amount">
                                
                              </span>
                              <span>
                                BTC
                              </span>
                            </div>
                            <canvas id="qr" height="500%" width="500%"  align="center"></canvas>
                            <div id="lightaddress" class="order-pr--value"></div>
                            <div>
                              <a href="" id="order-pr--wallet" class="order-pr--wallet">Open Wallet</a>
                              <a href="" id="order-pr--copy" class="order-pr--copy">Copy</a>
                            </div>
                          </div>
                            <div id="order-thanks" class="order-thanks" style="display: none" align="center">
                              Thanks you for your order
                            </div>
                          </div>

                           <!--.site-form-->
                       </div>
                       <!--.hero-media-->
                                              
                   </div>
                   <!--.col-md-12-->
                </div>
                <!--.row-->
            </div>
            <!--.container-->
            
        </div>
    
                       
                    </div>
                    <!--.pricing-table-cont-->
                </div>
                <!--.row-->
            </div>
            <!--.container-->
        </div>
      
        
        <footer id="contact-area" class="page-sections">
                <div class="container">
                    <div class="row footer-contact-details contact-area-rows">
                        <div class="col-md-12">
                            
                            <!--.contact-details-module-->
                        </div>
                        <!--.col-md-12-->
                    </div>
                    <!--.row-->
                    <div class="row footer-social contact-area-rows">
                        <div class="col-md-12">
                            <ul class="social-icons-list">
                                <li><a href="https://twitter.com/crypto_skillz" class="fab fa-twitter" target="_blank"></a></li>
                                <li><a href="https://github.com/cryptoskillz/" class="fab fa-github" target="_blank"></a></li>
                                <li><a href="https://medium.com/@cryptoskillz_58791" class="fas fa-pencil-alt" target="_blank"></a></li>
                            </ul>
                        </div>
                        <!--.col-md-12-->
                    </div>
                    <!--.row-->
                    
                    <div class="row footer-copyright contact-area-rows">
                        <div class="col-md-12">
                            <p class="copyright text-center">&copy;no one, do what you please</p>
                        </div>
                        <!--.col-md-12-->
                    </div>
                    <!--.row-->
                </div>
                <!--.container-->
            </footer>
            <!--#contact-area-->
        </div>     
        <!--page-wrap-->
        
        <!-- jQuery Library -->
        <script src="js/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
        <!-- Bootstrap JS -->
        <script src="js/lib/bootstrap.min.js" type="text/javascript"></script> 
        <!-- Owl Carousel Js -->
        <script src="js/lib/owl.carousel.min.js" type="text/javascript"></script>   
        <!-- Resize Sensor JS -->
        <script src="js/lib/resizesensor.min.js" type="text/javascript"></script>
        <!-- Theia Sticky Sidebar JS -->
        <script src="js/lib/theia-sticky-sidebar.min.js" type="text/javascript"></script>  
        <!-- WOW JS -->
        <script src="js/lib/wow.min.js" type="text/javascript"></script>
        <!-- Validator JS -->
        <script src="js/lib/validator.min.js" type="text/javascript"></script> 
        <!-- Magnific Popup JS -->
        <script src="js/lib/jquery.magnific-popup.min.js" type="text/javascript"></script>           
        <!-- Main Custom JS -->    
        <script src="js/main.js" type="text/javascript"></script>
        <!-- Custom Document Scrolling JS 
        <script src="js/scroll.js" type="text/javascript"></script>  -->    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111636971-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111636971-1');
</script>    
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script>
//todo : Move all this into sr.js
//hold the checkpayment interval function
var checkpaymentres = "";
//var serverurl = "http://127.0.0.1:3030";
var serverurl = "https://ecslive.cryptoskillz.com";
var address = "";
var thankstext = "Thanks for your order.  You will receive nothing.";
var request = new XMLHttpRequest();
//var server =
request.open(
  "GET",
  serverurl + "/strike/charge?uid=3&currency=btc&amount=2000&desc=free btc",
  true
);
//request.open('GET',"https://ecs.cryptoskillz.com/strike/charge?uid=3&currency=btc&amount=2000&desc=free btc", true);
//call it

request.onload = function() {
  if (request.status >= 200 && request.status < 400) {
    // parse the data
    var data = JSON.parse(request.responseText);
    //debug
    //console.log(data.payment)
    lightelement = document.getElementById("lightaddress");
    lightelement.innerHTML = data.payment.payment_request;
    orderid = document.getElementById("order-id");
    orderid.innerHTML = "Order " + data.payment.id;
    var total = parseFloat(data.payment.amount) * 0.00000001;
    orderamount = document.getElementById("order-amount");
    orderamount.innerHTML = "Pay " + String(total);
    // builds and displays the QR code
    new QRious({
      element: document.getElementById("qr"),
      value: data.payment.payment_request,
      size: 400
    });
    preload = document.getElementById("order-preload");
    preload.style = "display: none";
    qrcode = document.getElementById("order-qrcode");
    qrcode.style = "display: visible";
    qrcode = document.getElementById("order-pr--wallet");
    qrcode.href = "lightning:" + data.payment.payment_request;
    address = data.payment.payment_request;

    //check for payment every 10 seconds
    checkpaymentres = setInterval(checkPayment, 10000);
  }
};
request.onerror = function() {
  // There was a connection error of some sort
};
request.send();

function stopPaymentCheck() {
  clearInterval(checkpaymentres);
}

function checkPayment() {
  //debug
  //console.log('check payment ticker')
  //var url = serverurl+"/webhook/checkpayment?address="+address+"&token="+token;
  //var url = serverurl+"webhook/checkStrikePayment?address="+address;
  //debug
  console.log("checking for payment for address:" + address);
  request.open(
    "GET",
    serverurl + "/webhook/checkstrikepayment?address=" + address,
    true
  );
  //request.open('GET',"https://ecs.cryptoskillz.com/strike/charge?uid=3&currency=btc&amount=2000&desc=free btc", true);
  //call it
  request.onload = function() {
    if (request.status >= 200 && request.status < 400) {
      // parse the data
      var data = JSON.parse(request.responseText);
      //debug
      //console.log(data.status)

      if (data.status == 1) {
        orderthanks = document.getElementById("order-thanks");
        orderthanks.style = "display: visible";
        orderthanks.innerHTML = thankstext;

        orderdetails = document.getElementById("order-details");
        orderdetails.style = "display: none";
        stopPaymentCheck();
      }
    }
  };
  request.onerror = function() {
    // There was a connection error of some sort
  };
  request.send();
}

document.getElementById("order-pr--copy").addEventListener("click", function() {
  const el = document.createElement("textarea"); // Create a <textarea> element
  el.value = address; // Set its value to the string that you want copied
  el.setAttribute("readonly", ""); // Make it readonly to be tamper-proof
  el.style.position = "absolute";
  el.style.left = "-9999px"; // Move outside the screen to make it invisible
  document.body.appendChild(el);
  el.select(); // Select the <textarea> content
  document.execCommand("copy"); // Copy - only works as a result of a user action (e.g. click events)
  document.body.removeChild(el);
});   
    </script>  
    </body>
</html>